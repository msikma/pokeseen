'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createSeenPage = undefined;

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

var _regenerator = require('babel-runtime/regenerator');

var _regenerator2 = _interopRequireDefault(_regenerator);

var _defineProperty2 = require('babel-runtime/helpers/defineProperty');

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _extends3 = require('babel-runtime/helpers/extends');

var _extends4 = _interopRequireDefault(_extends3);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _server = require('react-dom/server');

var _server2 = _interopRequireDefault(_server);

var _repoinfojs = require('repoinfojs');

var _repoinfojs2 = _interopRequireDefault(_repoinfojs);

var _moment = require('moment');

var _moment2 = _interopRequireDefault(_moment);

var _lodash = require('lodash');

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _data = require('./data');

var _saveFile = require('./util/saveFile');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * pokeseen - <https://github.com/msikma/pokeseen>
 * Copyright © 2018, Michiel Sikma
 */

var modulesPath = _path2.default.resolve(__dirname, '..', 'node_modules');
var docsPath = _path2.default.resolve(__dirname, '..', 'docs');
var staticPath = _path2.default.resolve(__dirname, '..', 'static');

var never = 'Never seen';

/**
 * Generates and saves an HTML page containing the appearance data
 * generated by sortPokemonByAppearances().
 */
var createSeenPage = exports.createSeenPage = function () {
  var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee(appearancesRanking, appearanceDataSpecials, lastSeenRanking, airedEpisodesList, specialEpisodesList) {
    var repoInfo, data, lastSeenRankingByID, pageMarkup;
    return _regenerator2.default.wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return (0, _repoinfojs2.default)();

          case 2:
            repoInfo = _context.sent;
            data = {
              version: _data.pkgData.version,
              commits: repoInfo.commits,
              hash: repoInfo.hash,
              homepage: _data.pkgData.homepage,
              generationTime: (0, _moment2.default)().format('YYYY-MM-DD HH:mm:ssZZ')
              // Render our React component to HTML and save it using the wrapper string.
            };
            lastSeenRankingByID = lastSeenRanking.map(function (item, n) {
              return (0, _extends4.default)({}, item, { n: n });
            }).reduce(function (acc, item) {
              return (0, _extends4.default)({}, acc, (0, _defineProperty3.default)({}, item.id, item));
            }, {});
            pageMarkup = _server2.default.renderToStaticMarkup(_react2.default.createElement(SeenPage, (0, _extends4.default)({ lastSeenRankingByID: lastSeenRankingByID, appearanceDataSpecials: appearanceDataSpecials, appearancesRanking: appearancesRanking, airedEpisodesList: airedEpisodesList, specialEpisodesList: specialEpisodesList }, data)));
            _context.next = 8;
            return (0, _saveFile.saveFile)(docsPath + '/index.html', wrapPage(pageMarkup, data));

          case 8:
            _context.next = 10;
            return copyFile(modulesPath + '/pokesprite/overview.min.css', docsPath);

          case 10:
            _context.next = 12;
            return copyFile(staticPath + '/pokeseen.css', docsPath);

          case 12:
            _context.next = 14;
            return copyFile(staticPath + '/pokeseen.js', docsPath);

          case 14:

            console.log('Saved Pok\xE9Seen page to ' + docsPath + '/index.html and copied over static resources.');

          case 15:
          case 'end':
            return _context.stop();
        }
      }
    }, _callee, undefined);
  }));

  return function createSeenPage(_x, _x2, _x3, _x4, _x5) {
    return _ref.apply(this, arguments);
  };
}();

/**
 * Copies a file from a path to a destination directory.
 */
var copyFile = function copyFile(src, destDir) {
  return new _promise2.default(function (resolve, reject) {
    var dest = destDir + '/' + _path2.default.basename(src);
    _fs2.default.copyFile(src, dest, function (err) {
      if (err) return reject(err);
      return resolve();
    });
  });
};

/**
 * Pokémon icon component.
 */
var PokemonIcon = function PokemonIcon(_ref2) {
  var pkmnInfo = _ref2.pkmnInfo,
      id = _ref2.id;

  var slug = pkmnInfo.slug.eng;
  return _react2.default.createElement(
    'span',
    { id: 'icon_' + id, className: 'pkspr pkmn-' + slug },
    _react2.default.createElement('img', { src: 'https://raw.githubusercontent.com/msikma/pokesprite/master/pokemon-gen8/regular/' + slug + '.png' })
  );
};

/**
 * Returns the episode series identifier, and whether this is a special.
 */
var getEpisodeSeries = function getEpisodeSeries(ep) {
  if (ep == null) {
    return 'none';
  }
  var isSpecial = false;
  var series = ep.toLowerCase().replace(/[0-9]*/g, '');
  var number = Number(ep.toLowerCase().replace(/[a-z]*/g, ''));
  if (series[2] === 's') {
    series = series.slice(0, 2);
    isSpecial = true;
  }
  if (series === 'ep' && number >= 117) {
    series = 'gs';
  }
  return { series: series, isSpecial: isSpecial, number: number };
};

/**
 * Returns the Pokémon's origin region.
 */
var getPokemonOrigin = function getPokemonOrigin(pkmnInfo) {
  var id = Number(pkmnInfo.idx);
  var value = 'Kanto';
  if (id >= 152) value = 'Johto';
  if (id >= 252) value = 'Hoenn';
  if (id >= 387) value = 'Sinnoh';
  if (id >= 494) value = 'Unova'; // Issyu
  if (id >= 650) value = 'Kalos';
  if (id >= 722) value = 'Alola';
  if (id >= 810) value = 'Galar';
  if (id >= 906) value = 'Paldea';
  return { slug: value.toLowerCase(), title: value };
};

/**
 * Episode link component.
 */
var EpisodeLink = function EpisodeLink(_ref3) {
  var ep = _ref3.ep;

  var _getEpisodeSeries = getEpisodeSeries(ep),
      series = _getEpisodeSeries.series,
      isSpecial = _getEpisodeSeries.isSpecial;

  return _react2.default.createElement(
    'li',
    null,
    _react2.default.createElement(
      'a',
      { className: (0, _classnames2.default)('t', 'ep-series-' + series, { special: isSpecial }), target: '_blank', href: (0, _data.epURL)(ep) },
      ep
    )
  );
};

/**
 * Main component.
 *
 * The Pokémon ranking data uses the following format:
 *
 * [ { id: '789',
 *     amount: 9,
 *     lastSeen: { ja: '2018-05-10', us: '2018-04-07' } }, ... ]
 */
var SeenPage = function SeenPage(_ref4) {
  var lastSeenRankingByID = _ref4.lastSeenRankingByID,
      appearanceDataSpecials = _ref4.appearanceDataSpecials,
      appearancesRanking = _ref4.appearancesRanking,
      airedEpisodesList = _ref4.airedEpisodesList,
      specialEpisodesList = _ref4.specialEpisodesList,
      version = _ref4.version,
      commits = _ref4.commits,
      hash = _ref4.hash,
      homepage = _ref4.homepage,
      generationTime = _ref4.generationTime;
  return _react2.default.createElement(
    'div',
    { id: 'top' },
    _react2.default.createElement(
      'div',
      { className: 'description' },
      _react2.default.createElement(
        'div',
        { className: 'header' },
        _react2.default.createElement(
          'h1',
          { lang: 'en' },
          'Pok\xE9mon TV appearance statistics'
        ),
        _react2.default.createElement(
          'p',
          { lang: 'en' },
          'This page ranks Pok\xE9mon based on how many times they\'ve appeared in the TV show and lists when we last saw them.'
        ),
        _react2.default.createElement(
          'p',
          { lang: 'ja' },
          '\u3053\u306E\u30DA\u30FC\u30B8\u306F\u3001\u30DD\u30B1\u30E2\u30F3\u304C\u30A2\u30CB\u30E1\u306B\u4F55\u5EA6\u767B\u5834\u3057\u305F\u304B\u3092\u30E9\u30F3\u30AD\u30F3\u30B0\u3057\u3001\u3044\u3064\u6700\u5F8C\u306B\u767B\u5834\u3057\u305F\u304B\u3082\u63B2\u8F09\u3057\u3066\u3044\u307E\u3059\u3002'
        )
      ),
      _react2.default.createElement(
        'div',
        { className: 'docs-container' },
        _react2.default.createElement(
          'p',
          { lang: 'en' },
          _react2.default.createElement(
            'em',
            null,
            'Appearances'
          ),
          ' lists the number of episodes the Pok\xE9mon has appeared in. Its ',
          _react2.default.createElement(
            'em',
            null,
            'last appearance'
          ),
          ' is based on the Japanese episode schedule. Click on a Pok\xE9mon\'s table row to see the list of episodes it has appeared in. The ranking uses statistics from the currently released ',
          airedEpisodesList.length,
          ' episodes (and ',
          specialEpisodesList.length,
          ' specials).'
        ),
        _react2.default.createElement(
          'p',
          { className: 'bottom-line', lang: 'en' },
          'This project covers the anime up to the ',
          _react2.default.createElement(
            'a',
            { href: 'https://bulbapedia.bulbagarden.net/wiki/Pok%C3%A9mon_Horizons:_The_Series' },
            'Horizons'
          ),
          ' series. No further updates will be made.'
        ),
        _react2.default.createElement(
          'p',
          { lang: 'ja' },
          '\u300CAppearances\u300D\u306F\u30DD\u30B1\u30E2\u30F3\u304C\u30A2\u30CB\u30E1\u306B\u4F55\u5EA6\u767B\u5834\u3057\u305F\u304B\u3092\u793A\u3057\u3066\u3044\u307E\u3059\u3002\u307E\u305F\u3001\u300CLast appearance\u300D\u306F\u30DD\u30B1\u30E2\u30F3\u304C\u65E5\u672C\u3067\u6700\u5F8C\u306B\u653E\u9001\u3055\u308C\u305F\u30A8\u30D4\u30BD\u30FC\u30C9\u306E\u653E\u9001\u65E5\u3092\u793A\u3057\u3066\u3044\u307E\u3059\u3002 \u30C6\u30FC\u30D6\u30EB\u306E\u884C\u3092\u30AF\u30EA\u30C3\u30AF\u3059\u308B\u3068\u3001\u305D\u306E\u30DD\u30B1\u30E2\u30F3\u304C\u767B\u5834\u3057\u305F\u30A8\u30D4\u30BD\u30FC\u30C9\u306E\u30EA\u30B9\u30C8\u3092\u898B\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002 \u3053\u306E\u30E9\u30F3\u30AD\u30F3\u30B0\u306F\u73FE\u5728\u516C\u958B',
          airedEpisodesList.length,
          '\u8A71\uFF08\uFF0B\u30B9\u30DA\u30B7\u30E3\u30EB',
          specialEpisodesList.length,
          '\u8A71\uFF09\u306E\u30C7\u30FC\u30BF\u3092\u57FA\u306B\u3057\u3066\u3044\u307E\u3059\u3002'
        ),
        _react2.default.createElement(
          'p',
          { className: 'bottom-line', lang: 'ja' },
          '\u3053\u306E\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8\u306F2023\u5E74\u306E\u30A2\u30CB\u30E1\u307E\u3067\u3092\u5BFE\u8C61\u3068\u3057\u3066\u3044\u307E\u3059\u3002\u4ECA\u5F8C\u306E\u66F4\u65B0\u306F\u884C\u308F\u308C\u307E\u305B\u3093\u3002'
        ),
        _react2.default.createElement(
          'p',
          { id: 'generation_time' },
          'Generated ',
          _react2.default.createElement(
            'span',
            { className: 'time-abs-prefix' },
            'on'
          ),
          _react2.default.createElement(
            'span',
            { className: 'time', 'data-time': +new Date(generationTime), title: generationTime },
            generationTime
          ),
          '.'
        ),
        _react2.default.createElement('script', { dangerouslySetInnerHTML: { __html: 'PokeSeen.humanizeGenerationTime()' } })
      )
    ),
    _react2.default.createElement(
      'table',
      { className: 'table pkspr-overview', id: 'data_table' },
      _react2.default.createElement(
        'tbody',
        null,
        _react2.default.createElement(
          'tr',
          null,
          _react2.default.createElement(
            'th',
            null,
            '#'
          ),
          _react2.default.createElement(
            'th',
            null,
            'ID'
          ),
          _react2.default.createElement(
            'th',
            { className: 'center' },
            'Icon'
          ),
          _react2.default.createElement(
            'th',
            { colSpan: 2 },
            'Name'
          ),
          _react2.default.createElement(
            'th',
            null,
            _react2.default.createElement(
              'a',
              { href: '#', className: 'sort-link active', id: 'appearance_sort' },
              _react2.default.createElement(
                'span',
                { className: 'regular-label' },
                'Appearances'
              ),
              _react2.default.createElement(
                'span',
                { className: 'small-label' },
                'Eps'
              )
            )
          ),
          _react2.default.createElement(
            'th',
            { className: 'center' },
            _react2.default.createElement(
              'span',
              { className: 'regular-label' },
              'Origin'
            )
          ),
          _react2.default.createElement(
            'th',
            { colSpan: 3, className: 'last-episode-col' },
            _react2.default.createElement(
              'a',
              { href: '#', className: 'sort-link', id: 'last_seen_sort' },
              _react2.default.createElement(
                'span',
                { className: 'regular-label' },
                'Last appearance'
              ),
              _react2.default.createElement(
                'span',
                { className: 'small-label' },
                'Last seen/\u6700\u5F8C\u306E\u767B\u5834'
              )
            )
          )
        ),
        _react2.default.createElement('script', { dangerouslySetInnerHTML: { __html: 'PokeSeen.decorateSorters(\'appearance_sort\', \'last_seen_sort\')' } }),
        appearancesRanking.map(function (pokemon, n) {
          // Construct two rows: one with the sorted data, and one with the episode IDs.
          var amount = pokemon.amount,
              amountIncSpecials = pokemon.amountIncSpecials,
              lastSeen = pokemon.lastSeen,
              episodes = pokemon.episodes;

          var id = String(Number(pokemon.id)).padStart(3, '0');
          var idNumber = Number(id);

          // Check if it's faster to see which episodes a Pokémon did *not* appear in.
          var episodesInverse = (0, _lodash.xor)(airedEpisodesList, episodes);
          // If this Pokémon is in more episodes than half.
          var hasReallyManyEpisodes = episodes.length > episodesInverse.length;

          var pkmnInfo = _data.pokedex[id];
          var bulbaLink = 'https://bulbapedia.bulbagarden.net/wiki/' + pkmnInfo.name.eng + '_(Pok\xE9mon)';

          var cols = 10;
          var isLast = n === appearancesRanking.length - 1;

          // If listing fewer than this amount of episodes, switch to a different layout.
          var fewEpisodes = 12;

          // Sort order. All * 2, since we've actually got two rows per item.
          var orderAppearances = n * 2;
          var orderLastSeen = lastSeenRankingByID[id].n * 2;

          // Whether to use 'appears in all episodes *except*' type lists if they are shorter.
          var useExceptLists = false;

          // Determine specials this Pokémon was seen in.
          var pokemonSpecialData = appearanceDataSpecials[id];
          var specials = pokemonSpecialData.episodes.length === 0 ? null : _react2.default.createElement(
            'div',
            { className: (0, _classnames2.default)('ep-cols specials', { short: episodes.length < fewEpisodes }) },
            _react2.default.createElement(
              'div',
              { className: 'ep-header' },
              'Specials:'
            ),
            _react2.default.createElement(
              'ul',
              { className: 'ep-content' },
              pokemonSpecialData.episodes.map(function (ep) {
                return _react2.default.createElement(EpisodeLink, { ep: ep, key: ep });
              })
            )
          );

          // The last episode it appeared in.
          var lastEpisode = episodes[episodes.length - 1];
          var lastSpecial = pokemonSpecialData.episodes[pokemonSpecialData.episodes.length - 1];

          // Determine the last time this Pokémon was seen, if ever.
          // The relative time is later humanized dynamically.
          var lastJaRegular = (0, _lodash.get)(lastSeen, 'ja', null);
          var lastJaSpecial = (0, _lodash.get)(pokemonSpecialData.lastSeen, 'ja', null);
          var neverSeenJa = !lastJaRegular && !lastJaSpecial;

          // The lastSeen variables are YYYY-MM-DD dates, so we can compare them normally.
          var lastIsSpecial = lastJaSpecial == null ? false : lastJaRegular == null ? true : lastJaRegular >= lastJaSpecial ? false : true;
          var lastJa = lastIsSpecial ? lastJaSpecial : lastJaRegular;
          var lastJaInt = (0, _moment2.default)().diff((0, _moment2.default)(lastJa), 'ms');
          var lastEpisodeSeries = getEpisodeSeries(lastEpisode);
          var pokemonOrigin = getPokemonOrigin(pkmnInfo);

          return [_react2.default.createElement(
            'tr',
            {
              key: 'main_info_' + id,
              id: 'item_' + id,
              className: (0, _classnames2.default)('main-info', { 'last': isLast }),
              'data-id': id,
              'data-last-seen-n': orderLastSeen,
              'data-appearances-n': orderAppearances
            },
            _react2.default.createElement(
              'td',
              { className: 'minimal id' },
              n + 1
            ),
            _react2.default.createElement(
              'td',
              { className: 'minimal' },
              id
            ),
            _react2.default.createElement(
              'td',
              { className: 'minimal' },
              _react2.default.createElement(PokemonIcon, { pkmnInfo: pkmnInfo, id: id })
            ),
            _react2.default.createElement(
              'td',
              { className: 'name name-en' },
              pkmnInfo.name.eng
            ),
            _react2.default.createElement(
              'td',
              { className: 'name name-jp' },
              _react2.default.createElement(
                'span',
                { title: pkmnInfo.name.jpn_ro },
                pkmnInfo.name.jpn
              )
            ),
            _react2.default.createElement(
              'td',
              null,
              amountIncSpecials
            ),
            _react2.default.createElement(
              'td',
              { className: (0, _classnames2.default)('minimal') },
              _react2.default.createElement(
                'span',
                { className: (0, _classnames2.default)('t', 'origin-' + pokemonOrigin.slug) },
                pokemonOrigin.title
              )
            ),
            _react2.default.createElement(
              'td',
              (0, _extends4.default)({ className: neverSeenJa ? 'never' : 'last-episode series series-' + lastEpisodeSeries.series }, neverSeenJa ? { colSpan: 3 } : {}),
              _react2.default.createElement(
                'span',
                { className: 't' },
                neverSeenJa ? never : lastIsSpecial ? lastSpecial : lastEpisode
              )
            ),
            !neverSeenJa ? _react2.default.createElement(
              'td',
              { className: 'last-ja' },
              lastJa
            ) : null,
            !neverSeenJa ? _react2.default.createElement('td', { className: 'time-ago', 'data-time-ago-ms': isNaN(lastJaInt) ? -1 : lastJaInt }) : null
          ), _react2.default.createElement(
            'tr',
            {
              id: 'episodes_' + id,
              className: (0, _classnames2.default)('episode-info', { last: isLast }),
              'data-id': id,
              'data-last-seen-n': orderLastSeen + 1,
              'data-appearances-n': orderAppearances + 1,
              key: 'ep_info_' + id
            },
            episodesInverse.length === 0 ? _react2.default.createElement(
              'td',
              { colSpan: cols, className: 'ep-cols-container' },
              'Appears in every episode to date.',
              specials
            ) : episodes.length === 0 ? _react2.default.createElement(
              'td',
              { colSpan: cols, className: 'ep-cols-container' },
              'No appearances in the TV series.',
              specials
            ) : episodesInverse.length > episodes.length || !useExceptLists ? _react2.default.createElement(
              'td',
              { colSpan: cols, className: 'ep-cols-container' },
              _react2.default.createElement(
                'div',
                { className: (0, _classnames2.default)('ep-cols', 'general') },
                _react2.default.createElement(
                  'div',
                  { className: 'ep-header' },
                  'General info:'
                ),
                _react2.default.createElement(
                  'div',
                  { className: 'general-content' },
                  _react2.default.createElement(
                    'ul',
                    null,
                    _react2.default.createElement(
                      'li',
                      null,
                      _react2.default.createElement(
                        'a',
                        { href: bulbaLink },
                        pkmnInfo.name.eng,
                        ' article on Bulbapedia'
                      )
                    )
                  )
                )
              ),
              _react2.default.createElement(
                'div',
                { className: (0, _classnames2.default)('ep-cols', { short: episodes.length < fewEpisodes }) },
                _react2.default.createElement(
                  'div',
                  { className: 'ep-header' },
                  'Appears in:'
                ),
                _react2.default.createElement(
                  'div',
                  { className: 'ep-content-group' },
                  hasReallyManyEpisodes ? [_react2.default.createElement(
                    'div',
                    { key: 'a', className: 'ep-content-header' },
                    'Appears in all episodes ',
                    _react2.default.createElement(
                      'em',
                      null,
                      'except'
                    ),
                    ':'
                  ), _react2.default.createElement(
                    'ul',
                    { key: 'b', className: 'ep-content' },
                    episodesInverse.map(function (ep) {
                      return _react2.default.createElement(EpisodeLink, { ep: ep, key: ep });
                    })
                  ), _react2.default.createElement(
                    'div',
                    { key: 'c', className: 'ep-content-header' },
                    'Episodes it appears in:'
                  )] : null,
                  _react2.default.createElement(
                    'ul',
                    { className: 'ep-content' },
                    episodes.map(function (ep) {
                      return _react2.default.createElement(EpisodeLink, { ep: ep, key: ep });
                    })
                  )
                )
              ),
              specials
            ) : _react2.default.createElement(
              'td',
              { colSpan: cols, className: 'ep-cols-container' },
              _react2.default.createElement(
                'div',
                { className: (0, _classnames2.default)('ep-cols', { short: episodesInverse.length < fewEpisodes }) },
                _react2.default.createElement(
                  'div',
                  { className: 'ep-header' },
                  'Appears in every episode ',
                  _react2.default.createElement(
                    'em',
                    null,
                    'except'
                  ),
                  ':'
                ),
                _react2.default.createElement(
                  'ul',
                  { className: 'ep-content' },
                  episodesInverse.map(function (ep) {
                    return _react2.default.createElement(EpisodeLink, { ep: ep, key: ep });
                  })
                )
              ),
              specials
            )
          ), _react2.default.createElement('script', { key: 'js_' + id, dangerouslySetInnerHTML: { __html: 'PokeSeen.decorate(\'' + id + '\')' } })];
        })
      )
    ),
    _react2.default.createElement(
      'div',
      { className: 'description' },
      _react2.default.createElement(
        'div',
        { className: 'docs-container closing' },
        _react2.default.createElement(
          'p',
          null,
          'Pok\xE9mon is \xA9 1995-',
          new Date().getFullYear(),
          ' Nintendo/Creatures Inc./GAME FREAK Inc.'
        ),
        _react2.default.createElement(
          'p',
          null,
          'The source code for this page is available on ',
          _react2.default.createElement(
            'a',
            { href: 'https://github.com/msikma/pokeseen' },
            'Github'
          ),
          '. Statistics were determined from ',
          _react2.default.createElement(
            'a',
            { href: 'https://bulbapedia.bulbagarden.net/' },
            'Bulbapedia'
          ),
          ' data.'
        )
      )
    )
  );
};

/**
 * Base HTML wrapper for the template page.
 */
var wrapPage = function wrapPage(str, _ref5) {
  var version = _ref5.version,
      commits = _ref5.commits,
      hash = _ref5.hash,
      homepage = _ref5.homepage,
      generationTime = _ref5.generationTime;
  return '<!doctype html>\n<html lang="en">\n<!--\n\nPok\xE9Seen v' + version + ' (r' + commits + ', [' + hash + ']) <' + homepage + '>\nGenerated on ' + generationTime + '.\n\n-->\n<head>\n  <meta charset="utf-8" />\n  <title>Pok\xE9mon appearance statistics</title>\n  <meta name="viewport" content="width=586,initial-scale=1" />\n  <link type="text/css" href="overview.min.css" rel="stylesheet" media="screen" />\n  <link type="text/css" href="pokeseen.css" rel="stylesheet" media="screen" />\n\n  <meta property="og:title" content="Pok\xE9mon appearance statistics" />\n  <meta property="og:url" content="https://msikma.github.io/pokeseen/" />\n  <meta property="og:description" content="Statistics about how often each Pok\xE9mon appears in the TV show and when we last saw them" />\n\n  <script charset="utf-8" src="pokeseen.js" ></script>\n</head>\n<body>\n' + str + '\n</body>\n</html>';
};